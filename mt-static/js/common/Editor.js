Editor=new Class(Component,{changed:false,init:function(element,mode){arguments.callee.applySuper(this,arguments);this.setMode(mode||"iframe");},initComponents:function(){arguments.callee.applySuper(this,arguments);this.iframe=new this.constructor.Iframe(this.element.id+"-iframe",this);this.addComponent(this.iframe);this.textarea=new this.constructor.Textarea(this.element.id+"-textarea",this);this.addComponent(this.textarea);this.toolbar=new this.constructor.Toolbar(this.element.id+"-toolbar",this);this.addComponent(this.toolbar);},destroyObject:function(){this.toolbar=null;this.textarea=null;this.iframe=null;arguments.callee.applySuper(this,arguments);},toggleMode:function(){return this.setMode(this.mode=="iframe"?"textarea":"iframe");},setMode:function(mode){if(mode==this.mode)
return;log("setting mode "+mode);var html=this.actual?this.actual.getHTML():null;this.setModeActual(mode);this.reflow();if(defined(html)&&html!=null)
this.actual.setHTML(html);return html;},setModeActual:function(mode){if(mode!="iframe"&&mode!="textarea")
throw"Unknown editor mode "+mode;this.mode=mode;this.actual=this[this.mode];return this.actual;},reflow:function(){DOM.removeClassName(this.element,/editor-mode-/);DOM.addClassName(this.element,"editor-mode-"+this.mode);arguments.callee.applySuper(this,arguments);},updateToolbar:function(){},getKeyEventCommand:function(event){var c=(String.fromCharCode(event.charCode||event.keyCode)||"").toUpperCase();if((event.metaKey||event.ctrlKey)&&!event.shiftKey&&!event.altKey){switch(c){case"B":return"bold";case"I":return"italic";case"U":return"underline";case"Z":return"undo";case"Y":return"redo";}}else if((event.metaKey||event.ctrlKey)&&event.shiftKey&&!event.altKey){switch(c){case"Z":return"redo";}}},execCommand:function(command,userInterface,argument){this.setChanged();return this.actual.execCommand(command,userInterface,argument);},editLink:function(link){this.toolbar.editLink(link);},focus:function(){this.actual.focus();},getHTML:function(){return this.actual.getHTML();},setHTML:function(html){return this.actual.setHTML(html);},insertHTML:function(html,select,id,isTempId){this.setChanged();return this.actual.insertHTML(html,select,id,isTempId);},isTextSelected:function(selection){return this.actual.isTextSelected();},getSelectedLink:function(){return this.actual.getSelectedLink();},setChanged:function(){this.changed=true;}});Editor.strings={enterLinkAddress:"Enter the link address:",enterTextToLinkTo:"Enter the text to link to:"};